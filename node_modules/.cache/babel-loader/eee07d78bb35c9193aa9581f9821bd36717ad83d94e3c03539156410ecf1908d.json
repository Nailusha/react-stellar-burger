{"ast":null,"code":"import _objectSpread from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{memo,useCallback,useState}from\"react\";import styles from\"./burger-constructor.module.css\";import{ConstructorElement}from\"@ya.praktikum/react-developer-burger-ui-components\";import{useDispatch,useSelector}from\"react-redux\";import{useDrag,useDrop}from\"react-dnd\";import{addBun,addIngredient,deliteIngredient,removeList}from\"../../services/store/reducers/burgerConstructorSlice\";import{v4 as uuidv4}from\"uuid\";import{BurgerConstructorCard}from\"./burger-constructor-card/burger-constructor-card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BurgerConstructor=/*#__PURE__*/memo(function BurgerConstructor(_ref){var data=_ref.data,index=_ref.index;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.constIngredient;}),draggedBun=_useSelector.draggedBun,draggedIngredients=_useSelector.draggedIngredients;var _useSelector2=useSelector(function(state){return state.ingredDetails;}),selctIngredient=_useSelector2.selctIngredient,clickStutus=_useSelector2.clickStutus,count=_useSelector2.count;var _useSelector3=useSelector(function(state){return state.ingredients;}),bun=_useSelector3.bun,ingredients=_useSelector3.ingredients,isLoding=_useSelector3.isLoding;var _useDrop=useDrop({accept:\"ingredient\",drop:function drop(item){var itemWithUuId=_objectSpread(_objectSpread({},item),{},{_uuid:uuidv4()});{item.type===\"bun\"?dispatch(addBun(itemWithUuId)):dispatch(addIngredient(itemWithUuId));}},collect:function collect(monitor){return{isDropped:monitor.isOver()};}}),_useDrop2=_slicedToArray(_useDrop,2),isDropped=_useDrop2[0].isDropped,refDrop=_useDrop2[1];var _useDrop3=useDrop(function(){return{accept:\"card\"};}),_useDrop4=_slicedToArray(_useDrop3,2),drop=_useDrop4[1];var handleDeliteElement=useCallback(function(uuid){dispatch(deliteIngredient(uuid));});return/*#__PURE__*/_jsxs(\"div\",{ref:refDrop,className:isDropped?styles.gradient_border:{},children:[/*#__PURE__*/_jsx(\"div\",{className:styles.bun+\" pl-6 pt-4 pb-4\",children:draggedBun.map(function(item){return/*#__PURE__*/_jsx(ConstructorElement,{type:\"top\",isLocked:true,text:item.name+\" (Верх)\",price:item.price,thumbnail:item.image},item._uuid);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.itemMidle+\" custom-scroll pr-2\",children:draggedIngredients.filter(function(card){return card.type!==\"bun\";}).map(function(card,index){return/*#__PURE__*/_jsx(BurgerConstructorCard,{index:index,data:card,handleDeliteElement:handleDeliteElement},card._uuid);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.bun+\" pl-6 pt-4\",children:draggedBun.map(function(item){return/*#__PURE__*/_jsx(ConstructorElement,{type:\"bottom\",isLocked:true,text:item.name+\" (Низ)\",price:item.price,thumbnail:item.image},item._uuid);})})]});});export default BurgerConstructor;","map":{"version":3,"names":["React","memo","useCallback","useState","styles","ConstructorElement","useDispatch","useSelector","useDrag","useDrop","addBun","addIngredient","deliteIngredient","removeList","v4","uuidv4","BurgerConstructorCard","jsx","_jsx","jsxs","_jsxs","BurgerConstructor","_ref","data","index","dispatch","_useSelector","state","constIngredient","draggedBun","draggedIngredients","_useSelector2","ingredDetails","selctIngredient","clickStutus","count","_useSelector3","ingredients","bun","isLoding","_useDrop","accept","drop","item","itemWithUuId","_objectSpread","_uuid","type","collect","monitor","isDropped","isOver","_useDrop2","_slicedToArray","refDrop","_useDrop3","_useDrop4","handleDeliteElement","uuid","ref","className","gradient_border","children","map","isLocked","text","name","price","thumbnail","image","itemMidle","filter","card"],"sources":["C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/src/components/main/BurgerConstructor/burger-constructor.jsx"],"sourcesContent":["import React, { memo, useCallback, useState } from \"react\";\r\nimport styles from \"./burger-constructor.module.css\";\r\n\r\nimport { ConstructorElement } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport { addBun, addIngredient, deliteIngredient, removeList } from \"../../services/store/reducers/burgerConstructorSlice\";\r\n\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { BurgerConstructorCard } from \"./burger-constructor-card/burger-constructor-card\";\r\n\r\nconst BurgerConstructor = memo(function BurgerConstructor({ data, index }) {\r\n  const dispatch = useDispatch();\r\n  const { draggedBun, draggedIngredients } = useSelector(\r\n    (state) => state.constIngredient\r\n  );\r\n  const { selctIngredient, clickStutus, count } = useSelector(\r\n    (state) => state.ingredDetails\r\n  );\r\n\r\n  const { bun, ingredients, isLoding } = useSelector(\r\n    (state) => state.ingredients\r\n  );\r\n\r\n  const [{ isDropped }, refDrop] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(item) {\r\n      const itemWithUuId = {\r\n        ...item,\r\n        _uuid: uuidv4(),\r\n      };\r\n      {\r\n        item.type === \"bun\"\r\n          ? dispatch(addBun(itemWithUuId))\r\n          : dispatch(addIngredient(itemWithUuId));\r\n      }\r\n    },\r\n    collect: (monitor) => ({\r\n      isDropped: monitor.isOver(),\r\n    }),\r\n  });\r\n\r\n  const [, drop] = useDrop(() => ({ accept: \"card\" }));\r\n\r\n  const handleDeliteElement = useCallback((uuid) => {\r\n    dispatch(deliteIngredient(uuid));\r\n  });\r\n\r\n  return (\r\n    <div ref={refDrop} className={isDropped ? styles.gradient_border : {}}>\r\n      <div className={styles.bun + \" pl-6 pt-4 pb-4\"}>\r\n        {draggedBun.map((item) => {\r\n          return (\r\n            <ConstructorElement\r\n              type=\"top\"\r\n              isLocked={true}\r\n              text={item.name + \" (Верх)\"}\r\n              price={item.price}\r\n              thumbnail={item.image}\r\n              key={item._uuid}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className={styles.itemMidle + \" custom-scroll pr-2\"}>\r\n        {draggedIngredients\r\n          .filter((card) => card.type !== \"bun\")\r\n          .map((card, index) => {\r\n            return (\r\n              <BurgerConstructorCard\r\n                key={card._uuid}\r\n                index={index}\r\n                data={card}\r\n                handleDeliteElement={handleDeliteElement}\r\n              />\r\n            );\r\n          })}\r\n      </div>\r\n\r\n      <div className={styles.bun + \" pl-6 pt-4\"}>\r\n        {draggedBun.map((item) => {\r\n          return (\r\n            <ConstructorElement\r\n              type=\"bottom\"\r\n              isLocked={true}\r\n              text={item.name + \" (Низ)\"}\r\n              price={item.price}\r\n              thumbnail={item.image}\r\n              key={item._uuid}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default BurgerConstructor;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}