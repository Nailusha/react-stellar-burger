{"ast":null,"code":"import _objectSpread from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{memo,useCallback}from\"react\";import styles from\"./burger-constructor.module.css\";import{ConstructorElement}from\"@ya.praktikum/react-developer-burger-ui-components\";import{useAppDispatch,useAppSelector}from\"../../../services/hooks/hooks\";import{useDrop}from\"react-dnd\";import{addBun,addIngredient,deliteIngredient}from\"../../../services/store/reducers/burgerConstructorSlice\";import{v4 as uuidv4}from\"uuid\";import{BurgerConstructorCard}from\"./burger-constructor-card/burger-constructor-card\";import{constructorBunSelector}from\"../../../services/store/selector/IngredientsSelector/constructorBunSelector\";import{constructorSelector}from\"../../../services/store/selector/IngredientsSelector/constructorSelector\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BurgerConstructor=/*#__PURE__*/memo(function BurgerConstructor(){var dispatch=useAppDispatch();var draggedBun=useAppSelector(constructorBunSelector);var draggedIngredients=useAppSelector(constructorSelector);var _useDrop=useDrop({accept:\"ingredient\",drop:function drop(item){var itemWithUuId=_objectSpread(_objectSpread({},item),{},{_uuid:uuidv4()});{item.type===\"bun\"?dispatch(addBun(itemWithUuId)):dispatch(addIngredient(itemWithUuId));}},collect:function collect(monitor){return{isDropped:monitor.isOver()};}}),_useDrop2=_slicedToArray(_useDrop,2),isDropped=_useDrop2[0].isDropped,refDrop=_useDrop2[1];var _useDrop3=useDrop(function(){return{accept:\"card\"};}),_useDrop4=_slicedToArray(_useDrop3,2),drop=_useDrop4[1];var handleDeliteElement=useCallback(function(uuid){dispatch(deliteIngredient(uuid));},[dispatch]);return/*#__PURE__*/_jsxs(\"div\",{ref:refDrop,className:isDropped?styles.gradient_border:\"\",\"data-test\":'constructor',children:[/*#__PURE__*/_jsx(\"div\",{className:styles.bun+\" pl-6 pt-4 pb-4\",children:draggedBun.map(function(item){return/*#__PURE__*/_jsx(ConstructorElement,{type:\"top\",isLocked:true,text:item.name+\" (Верх)\",price:item.price,thumbnail:item.image},item._uuid);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.itemMidle+\" custom-scroll pr-2\",children:draggedIngredients.filter(function(card){return card.type!==\"bun\";}).map(function(card,index){return/*#__PURE__*/_jsx(BurgerConstructorCard,{index:index,data:card,handleDeliteElement:handleDeliteElement},card._uuid);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.bun+\" pl-6 pt-4\",children:draggedBun.map(function(item){return/*#__PURE__*/_jsx(ConstructorElement,{type:\"bottom\",isLocked:true,text:item.name+\" (Низ)\",price:item.price,thumbnail:item.image},item._uuid);})})]});});export default BurgerConstructor;","map":{"version":3,"names":["React","memo","useCallback","styles","ConstructorElement","useAppDispatch","useAppSelector","useDrop","addBun","addIngredient","deliteIngredient","v4","uuidv4","BurgerConstructorCard","constructorBunSelector","constructorSelector","jsx","_jsx","jsxs","_jsxs","BurgerConstructor","dispatch","draggedBun","draggedIngredients","_useDrop","accept","drop","item","itemWithUuId","_objectSpread","_uuid","type","collect","monitor","isDropped","isOver","_useDrop2","_slicedToArray","refDrop","_useDrop3","_useDrop4","handleDeliteElement","uuid","ref","className","gradient_border","children","bun","map","isLocked","text","name","price","thumbnail","image","itemMidle","filter","card","index","data"],"sources":["C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/src/components/main/BurgerConstructor/burger-constructor.tsx"],"sourcesContent":["import React, { memo, useCallback } from \"react\";\r\nimport styles from \"./burger-constructor.module.css\";\r\nimport { ConstructorElement } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../services/hooks/hooks\";\r\nimport { useDrop } from \"react-dnd\";\r\n\r\nimport { addBun, addIngredient, deliteIngredient } from \"../../../services/store/reducers/burgerConstructorSlice\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { BurgerConstructorCard } from \"./burger-constructor-card/burger-constructor-card\";\r\nimport { constructorBunSelector } from \"../../../services/store/selector/IngredientsSelector/constructorBunSelector\";\r\nimport { constructorSelector } from \"../../../services/store/selector/IngredientsSelector/constructorSelector\";\r\nimport { TingredintsConstructor } from \"../../../utils/types\";\r\n\r\nconst BurgerConstructor = memo(function BurgerConstructor() {\r\n  const dispatch = useAppDispatch();\r\n  const draggedBun = useAppSelector(constructorBunSelector);\r\n  const draggedIngredients = useAppSelector(constructorSelector);\r\n\r\n\r\n  \r\n  const [{ isDropped }, refDrop] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(item: TingredintsConstructor) {\r\n      const itemWithUuId = {\r\n        ...item,\r\n        _uuid: uuidv4(),\r\n      };\r\n      {\r\n        item.type === \"bun\"\r\n          ? dispatch(addBun(itemWithUuId))\r\n          : dispatch(addIngredient(itemWithUuId));\r\n      }\r\n    },\r\n    collect: (monitor) => ({\r\n      isDropped: monitor.isOver(),\r\n    }),\r\n  });\r\n\r\n  const [, drop] = useDrop(() => ({ accept: \"card\" }));\r\n\r\n  const handleDeliteElement = useCallback((uuid: string)=> {\r\n    dispatch(deliteIngredient(uuid));\r\n  },[dispatch]);\r\n\r\n  return (\r\n    <div ref={refDrop} className={isDropped ? styles.gradient_border : \"\"} data-test={'constructor'}>\r\n      <div className={styles.bun + \" pl-6 pt-4 pb-4\"}>      \r\n        {draggedBun.map((item: TingredintsConstructor) => {\r\n          return (\r\n            <ConstructorElement\r\n              type=\"top\"\r\n              isLocked={true}\r\n              text={item.name + \" (Верх)\"}\r\n              price={item.price}\r\n              thumbnail={item.image}\r\n              key={item._uuid}\r\n              \r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className={styles.itemMidle + \" custom-scroll pr-2\"}>\r\n        {draggedIngredients\r\n          .filter((card:TingredintsConstructor) => card.type !== \"bun\")\r\n          .map((card:TingredintsConstructor, index: number) => {\r\n            return (\r\n              <BurgerConstructorCard\r\n                key={card._uuid}\r\n                index={index}\r\n                data={card}\r\n                handleDeliteElement={handleDeliteElement}\r\n                \r\n              />\r\n            );\r\n          })}\r\n      </div>\r\n\r\n      <div className={styles.bun + \" pl-6 pt-4\"}>\r\n        {draggedBun.map((item:TingredintsConstructor) => {\r\n          return (\r\n            <ConstructorElement\r\n              type=\"bottom\"\r\n              isLocked={true}\r\n              text={item.name + \" (Низ)\"}\r\n              price={item.price}\r\n              thumbnail={item.image}\r\n              key={item._uuid}\r\n              \r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default BurgerConstructor;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}