{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createAsyncThunk}from\"@reduxjs/toolkit\";import{setAuthChecked,setUser}from\"../services/store/reducers/userAuthSlice\";export var BASE_URL=\"https://norma.nomoreparties.space/api\";export var ORDERS_ALL=\"wss://norma.nomoreparties.space/orders/all\";export var ORDERS=\"wss://norma.nomoreparties.space/orders\";export function checkResponse(res){return res.ok?res.json():res.json().then(function(err){return Promise.reject(err);});}//делаю обертку вокруг fetch чтобы в разных запросах можно было использовать, url базовый статичный, меняется только endpoint в этом api\nexport function request(endpoint,options){return fetch(\"\".concat(BASE_URL).concat(endpoint),options).then(checkResponse);}// async нужен когда несколько await поэтому убрал от сюда + а далее передаю рес, но его убрал т.к в стрелочной функции рес передается один и тотже в функицию\nexport var getIngredients=function getIngredients(){return request(\"/ingredients\",{});};export var fetchOrder=createAsyncThunk(\"orders/fetchOrder\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(orderNum){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(BASE_URL,\"/orders/\").concat(orderNum));case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error(\"Ошибка получения заказа\");case 5:_context.next=7;return response.json();case 7:data=_context.sent;return _context.abrupt(\"return\",data);case 9:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var getOrder=function getOrder(number){return request(\"/orders/\".concat(number),{});};export var sendOrder=createAsyncThunk(\"details/post\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dataId){var headers;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:headers={\"Content-Type\":\"application/json\",authorization:localStorage.getItem(\"accessToken\")||\"\"};return _context2.abrupt(\"return\",request(\"/orders\",{method:\"POST\",headers:headers,body:JSON.stringify({ingredients:dataId})}));case 2:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());//запрос на регистрацию\nexport var registerUser=createAsyncThunk(\"user/register\",/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(userData,_ref3){var dispatch;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dispatch=_ref3.dispatch;return _context3.abrupt(\"return\",request(\"/auth/register\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(userData)}).then(function(res){if(res.success){localStorage.setItem(\"accessToken\",res.accessToken);localStorage.setItem(\"refreshToken\",res.refreshToken);return res;}else{return Promise.reject(\"Ошибка данных с сервера\");}}).finally(function(){console.log(\"Ok\");}));case 2:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());//запрос на авторизацию\nexport var loginUser=createAsyncThunk(\"user/login\",/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data,thunkApi){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt(\"return\",request(\"/auth/login\",{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:data.email,password:data.password})}).then(function(res){if(res.success){localStorage.setItem(\"accessToken\",res.accessToken);localStorage.setItem(\"refreshToken\",res.refreshToken);return res;}else{return Promise.reject(\"Ошибка данных с сервера\");}}).catch(function(err){console.log(err);}).finally(function(){console.log(\"Ok\");}));case 1:case\"end\":return _context4.stop();}},_callee4);}));return function(_x5,_x6){return _ref5.apply(this,arguments);};}());// запрос на получение токенов через рефреш токен\nvar refreshToken=function refreshToken(){return request(\"/auth/token\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({token:localStorage.getItem(\"refreshToken\")})});};var fetchWithRefresh=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(url,options){var res,refreshData,_res;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return fetch(url,options);case 3:res=_context5.sent;_context5.next=6;return checkResponse(res);case 6:return _context5.abrupt(\"return\",_context5.sent);case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);console.log(_context5.t0 instanceof Error);if(!((_context5.t0 instanceof Error?_context5.t0.message:\"unknown_error\")===\"jwt expired\")){_context5.next=32;break;}console.log(_context5.t0);_context5.next=17;return refreshToken();case 17:refreshData=_context5.sent;console.log(refreshData);if(refreshData.success){_context5.next=21;break;}return _context5.abrupt(\"return\",Promise.reject(refreshData));case 21:localStorage.setItem(\"accessToken\",refreshData.accessToken);localStorage.setItem(\"refreshToken\",refreshData.refreshToken);options.headers.authorization=refreshData.accessToken;_context5.next=26;return fetch(url,options);case 26:_res=_context5.sent;_context5.next=29;return checkResponse(_res);case 29:return _context5.abrupt(\"return\",_context5.sent);case 32:return _context5.abrupt(\"return\",Promise.reject(_context5.t0));case 33:case\"end\":return _context5.stop();}},_callee5,null,[[0,9]]);}));return function fetchWithRefresh(_x7,_x8){return _ref6.apply(this,arguments);};}();export var getUser=function getUser(){return function(dispatch){return fetchWithRefresh(\"\".concat(BASE_URL,\"/auth/user\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",authorization:localStorage.getItem(\"accessToken\")}}).then(function(res){console.log(res);if(res.success){dispatch(setUser(res.user));}else{return Promise.reject(\"Ошибка данных с сервера\");}});};};export var checkUserAuth=createAsyncThunk(\"user/auth\",/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_,_ref7){var dispatch;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:dispatch=_ref7.dispatch;if(localStorage.getItem(\"accessToken\")){dispatch(getUser()).catch(function(error){localStorage.removeItem(\"accessToken\");localStorage.removeItem(\"refreshToken\");dispatch(setUser(null));}).finally(function(){return dispatch(setAuthChecked(true));});}else{dispatch(setAuthChecked(true));dispatch(setUser(null));}case 2:case\"end\":return _context6.stop();}},_callee6);}));return function(_x9,_x10){return _ref8.apply(this,arguments);};}());export var forgotPassword=createAsyncThunk(\"user/forgot\",/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(email,_){return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:return _context7.abrupt(\"return\",request(\"/password-reset\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email})}));case 1:case\"end\":return _context7.stop();}},_callee7);}));return function(_x11,_x12){return _ref9.apply(this,arguments);};}());export var resetPassword=createAsyncThunk(\"user/reset\",/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(data,_){return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:return _context8.abrupt(\"return\",request(\"/password-reset/reset\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({data:data})}));case 1:case\"end\":return _context8.stop();}},_callee8);}));return function(_x13,_x14){return _ref10.apply(this,arguments);};}());export var logoutUser=createAsyncThunk(\"user/logout\",/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(_,_ref11){var dispatch;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:dispatch=_ref11.dispatch;return _context9.abrupt(\"return\",request(\"/auth/logout\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({token:localStorage.getItem(\"refreshToken\")})}).then(function(){localStorage.removeItem(\"accessToken\");localStorage.removeItem(\"refreshToken\");}));case 2:case\"end\":return _context9.stop();}},_callee9);}));return function(_x15,_x16){return _ref12.apply(this,arguments);};}());","map":{"version":3,"names":["createAsyncThunk","setAuthChecked","setUser","BASE_URL","ORDERS_ALL","ORDERS","checkResponse","res","ok","json","then","err","Promise","reject","request","endpoint","options","fetch","concat","getIngredients","fetchOrder","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","orderNum","response","data","wrap","_callee$","_context","prev","next","sent","Error","abrupt","stop","_x","apply","arguments","getOrder","number","sendOrder","_ref2","_callee2","dataId","headers","_callee2$","_context2","authorization","localStorage","getItem","method","body","JSON","stringify","ingredients","_x2","registerUser","_ref4","_callee3","userData","_ref3","dispatch","_callee3$","_context3","success","setItem","accessToken","refreshToken","finally","console","log","_x3","_x4","loginUser","_ref5","_callee4","thunkApi","_callee4$","_context4","Accept","email","password","catch","_x5","_x6","token","fetchWithRefresh","_ref6","_callee5","url","refreshData","_res","_callee5$","_context5","t0","message","_x7","_x8","getUser","user","checkUserAuth","_ref8","_callee6","_","_ref7","_callee6$","_context6","error","removeItem","_x9","_x10","forgotPassword","_ref9","_callee7","_callee7$","_context7","_x11","_x12","resetPassword","_ref10","_callee8","_callee8$","_context8","_x13","_x14","logoutUser","_ref12","_callee9","_ref11","_callee9$","_context9","_x15","_x16"],"sources":["C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/src/utils/api.tsx"],"sourcesContent":["import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { setAuthChecked, setUser } from \"../services/store/reducers/userAuthSlice\";\r\nimport { TForgotPassword, TLogin, TProfile, TResetPassword, TingredintsConstructor } from \"./types\";\r\n\r\nexport const BASE_URL = \"https://norma.nomoreparties.space/api\";\r\nexport const ORDERS_ALL = \"wss://norma.nomoreparties.space/orders/all\";\r\nexport const ORDERS = \"wss://norma.nomoreparties.space/orders\";\r\n\r\nexport function checkResponse(res: Response) {\r\n  return res.ok\r\n    ? res.json()\r\n    : res.json().then((err: Error) => Promise.reject(err));\r\n}\r\n\r\n//делаю обертку вокруг fetch чтобы в разных запросах можно было использовать, url базовый статичный, меняется только endpoint в этом api\r\nexport function request(endpoint: string, options: RequestInit | undefined) {\r\n  return fetch(`${BASE_URL}${endpoint}`, options).then(checkResponse);\r\n}\r\n\r\n// async нужен когда несколько await поэтому убрал от сюда + а далее передаю рес, но его убрал т.к в стрелочной функции рес передается один и тотже в функицию\r\nexport const getIngredients = () => request(`/ingredients`, {});\r\n\r\nexport const fetchOrder = createAsyncThunk(\r\n  \"orders/fetchOrder\",\r\n  async (orderNum: number | string | undefined) => {\r\n    const response = await fetch(`${BASE_URL}/orders/${orderNum}`);\r\n    if (!response.ok) {\r\n      throw new Error(\"Ошибка получения заказа\");\r\n    }\r\n    const data = await response.json();\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const getOrder = (number: number) => request(`/orders/${number}`, {});\r\n\r\nexport const sendOrder = createAsyncThunk(\r\n  \"details/post\",\r\n  async (dataId: TingredintsConstructor[]) => {\r\n    const headers: HeadersInit = {\r\n      \"Content-Type\": \"application/json\",\r\n      authorization: localStorage.getItem(\"accessToken\") || \"\",\r\n    };\r\n\r\n    return request(`/orders`, {\r\n      method: \"POST\",\r\n      headers,\r\n      body: JSON.stringify({\r\n        ingredients: dataId,\r\n      }),\r\n    });\r\n  }\r\n);\r\n\r\n//запрос на регистрацию\r\nexport const registerUser = createAsyncThunk(\r\n  \"user/register\",\r\n  async (userData: TProfile, { dispatch }) => {\r\n    return request(`/auth/register`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(userData),\r\n    })\r\n      .then((res) => {\r\n        if (res.success) {\r\n          localStorage.setItem(\"accessToken\", res.accessToken);\r\n          localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n          return res;\r\n        } else {\r\n          return Promise.reject(\"Ошибка данных с сервера\");\r\n        }\r\n      })\r\n      .finally(() => {\r\n        console.log(\"Ok\");\r\n      });\r\n  }\r\n);\r\n\r\n//запрос на авторизацию\r\nexport const loginUser = createAsyncThunk(\r\n  \"user/login\",\r\n  async (data: TLogin, thunkApi) => {\r\n    return request(\"/auth/login\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: data.email,\r\n        password: data.password,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        if (res.success) {\r\n          localStorage.setItem(\"accessToken\", res.accessToken);\r\n          localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n          return res;\r\n        } else {\r\n          return Promise.reject(\"Ошибка данных с сервера\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        console.log(\"Ok\");\r\n      });\r\n  }\r\n);\r\n\r\n// запрос на получение токенов через рефреш токен\r\nconst refreshToken = () => {\r\n  return request(`/auth/token`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      token: localStorage.getItem(\"refreshToken\"),\r\n    }),\r\n  });\r\n};\r\n\r\nconst fetchWithRefresh = async (url: string, options: any) => {\r\n  try {\r\n    const res = await fetch(url, options);\r\n    return await checkResponse(res);\r\n  } catch (err) {\r\n    console.log(err);\r\n    console.log(err instanceof Error);\r\n    if (\r\n      (err instanceof Error ? err.message : \"unknown_error\") === \"jwt expired\"\r\n    ) {\r\n      console.log(err);\r\n      const refreshData = await refreshToken();\r\n      console.log(refreshData);\r\n      if (!refreshData.success) {\r\n        return Promise.reject(refreshData);\r\n      }\r\n      localStorage.setItem(\"accessToken\", refreshData.accessToken);\r\n      localStorage.setItem(\"refreshToken\", refreshData.refreshToken);\r\n      options.headers.authorization = refreshData.accessToken;\r\n      const res = await fetch(url, options);\r\n      return await checkResponse(res);\r\n    } else {\r\n      return Promise.reject(err);\r\n    }\r\n  }\r\n};\r\n\r\nexport const getUser = () => {\r\n  return (dispatch: (arg0: { payload: any; type: \"user/setUser\" }) => void) => {\r\n    return fetchWithRefresh(`${BASE_URL}/auth/user`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        authorization: localStorage.getItem(\"accessToken\"),\r\n      },\r\n    }).then((res) => {\r\n      console.log(res);\r\n      if (res.success) {\r\n        dispatch(setUser(res.user));\r\n      } else {\r\n        return Promise.reject(\"Ошибка данных с сервера\");\r\n      }\r\n    });\r\n  };\r\n};\r\n\r\nexport const checkUserAuth = createAsyncThunk(\r\n  \"user/auth\",\r\n  async (_, { dispatch }) => {\r\n    if (localStorage.getItem(\"accessToken\")) {\r\n      dispatch(getUser())\r\n        .catch((error) => {\r\n          localStorage.removeItem(\"accessToken\");\r\n          localStorage.removeItem(\"refreshToken\");\r\n          dispatch(setUser(null));\r\n        })\r\n        .finally(() => dispatch(setAuthChecked(true)));\r\n    } else {\r\n      dispatch(setAuthChecked(true));\r\n      dispatch(setUser(null));\r\n    }\r\n  }\r\n);\r\n\r\nexport const forgotPassword = createAsyncThunk(\r\n  \"user/forgot\",\r\n  async (email: TForgotPassword, _) => {\r\n    return request(`/password-reset`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email }),\r\n    });\r\n  }\r\n);\r\n\r\nexport const resetPassword = createAsyncThunk(\r\n  \"user/reset\",\r\n  async (data: TResetPassword, _) => {\r\n    return request(`/password-reset/reset`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ data }),\r\n    });\r\n  }\r\n);\r\n\r\nexport const logoutUser = createAsyncThunk(\r\n  \"user/logout\",\r\n  async (_, { dispatch }) => {\r\n    return request(`/auth/logout`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ token: localStorage.getItem(\"refreshToken\") }),\r\n    }).then(() => {\r\n      localStorage.removeItem(\"accessToken\");\r\n      localStorage.removeItem(\"refreshToken\");\r\n    });\r\n  }\r\n);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}