{"ast":null,"code":"import _slicedToArray from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ConstructorElement,DragIcon}from\"@ya.praktikum/react-developer-burger-ui-components\";import React,{memo}from\"react\";import{useDrag,useDrop}from\"react-dnd\";import{useDispatch,useSelector}from\"react-redux\";import{moveIngredients}from\"../../../services/store/reducers/burgerConstructorSlice\";import styles from\"./burger-constructor-card.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BurgerConstructorCard=/*#__PURE__*/memo(function BurgerConstructorCard(_ref){var data=_ref.data,handleDeliteElement=_ref.handleDeliteElement,index=_ref.index,text=_ref.text,moveCard=_ref.moveCard,findCard=_ref.findCard;var name=data.name,price=data.price,image_mobile=data.image_mobile,_id=data._id,_uuid=data._uuid;var _useSelector=useSelector(function(state){return state.constIngredient;}),draggedBun=_useSelector.draggedBun,draggedIngredients=_useSelector.draggedIngredients;var dispatch=useDispatch();var findIndex=function findIndex(item){return draggedIngredients.indexOf(item);};// часть с ингредиентами в конструкторе\nvar _useDrag=useDrag({type:\"card\",item:{ingredient:data},collect:function collect(monitor){return{isDragging:monitor.isDragging()};}}),_useDrag2=_slicedToArray(_useDrag,2),isDragging=_useDrag2[0].isDragging,refDrag=_useDrag2[1];var _useDrop=useDrop({accept:\"card\",hover:function hover(_ref2){var ingredient=_ref2.ingredient;if(ingredient._uuid===data._uuid)return;dispatch(moveIngredients({indexFrom:findIndex(ingredient),indexTo:index,ingredient:ingredient}));}}),_useDrop2=_slicedToArray(_useDrop,2),dropRef=_useDrop2[1];var opacity=isDragging?0:1;return/*#__PURE__*/_jsxs(\"div\",{ref:function ref(node){return dropRef(refDrag(node));},style:{opacity:opacity},className:styles.card,children:[/*#__PURE__*/_jsx(DragIcon,{}),/*#__PURE__*/_jsx(ConstructorElement,{text:name,price:price,thumbnail:image_mobile,handleClose:function handleClose(){return handleDeliteElement(_uuid);}})]});});","map":{"version":3,"names":["ConstructorElement","DragIcon","React","memo","useDrag","useDrop","useDispatch","useSelector","moveIngredients","styles","jsx","_jsx","jsxs","_jsxs","BurgerConstructorCard","_ref","data","handleDeliteElement","index","text","moveCard","findCard","name","price","image_mobile","_id","_uuid","_useSelector","state","constIngredient","draggedBun","draggedIngredients","dispatch","findIndex","item","indexOf","_useDrag","type","ingredient","collect","monitor","isDragging","_useDrag2","_slicedToArray","refDrag","_useDrop","accept","hover","_ref2","indexFrom","indexTo","_useDrop2","dropRef","opacity","ref","node","style","className","card","children","thumbnail","handleClose"],"sources":["C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/src/components/main/BurgerConstructor/burger-constructor-card/burger-constructor-card.jsx"],"sourcesContent":["  import { ConstructorElement, DragIcon, } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n  import React, { memo } from \"react\";\r\n  import { useDrag, useDrop } from \"react-dnd\";\r\n  import { useDispatch, useSelector } from \"react-redux\";\r\n  import { moveIngredients } from \"../../../services/store/reducers/burgerConstructorSlice\";\r\n  import styles from \"./burger-constructor-card.module.css\";\r\n  \r\n  export const BurgerConstructorCard = memo(function BurgerConstructorCard({\r\n    data,\r\n    handleDeliteElement,\r\n    index,\r\n    text,\r\n    moveCard,\r\n    findCard,\r\n  }) {\r\n    const { name, price, image_mobile, _id, _uuid } = data;\r\n    const { draggedBun, draggedIngredients } = useSelector(\r\n      (state) => state.constIngredient\r\n    );\r\n  \r\n    const dispatch = useDispatch();\r\n  \r\n    const findIndex = (item) => {\r\n      return draggedIngredients.indexOf(item);\r\n    };\r\n  \r\n    // часть с ингредиентами в конструкторе\r\n    const [{ isDragging }, refDrag] = useDrag({\r\n      type: \"card\",\r\n      item: { ingredient: data },\r\n      collect: (monitor) => ({\r\n        isDragging: monitor.isDragging(),\r\n      }),\r\n    });\r\n  \r\n    const [, dropRef] = useDrop({\r\n      accept: \"card\",\r\n      hover({ ingredient }) {\r\n        if (ingredient._uuid === data._uuid) return;\r\n  \r\n        dispatch(\r\n          moveIngredients({\r\n            indexFrom: findIndex(ingredient),\r\n            indexTo: index,\r\n            ingredient: ingredient,\r\n          })\r\n        );\r\n      },\r\n    });\r\n  \r\n    const opacity = isDragging ? 0 : 1;\r\n  \r\n    return (\r\n      <div\r\n        ref={(node) => dropRef(refDrag(node))}\r\n        style={{ opacity }}\r\n        className={styles.card}\r\n      >\r\n        <DragIcon />\r\n        <ConstructorElement\r\n          text={name}\r\n          price={price}\r\n          thumbnail={image_mobile}\r\n          handleClose={() => handleDeliteElement(_uuid)}\r\n        />\r\n      </div>\r\n    );\r\n  });"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}