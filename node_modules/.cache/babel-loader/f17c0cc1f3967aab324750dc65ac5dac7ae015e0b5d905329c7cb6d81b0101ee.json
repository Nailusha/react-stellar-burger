{"ast":null,"code":"import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { setAuthChecked, setUser } from \"../services/store/reducers/userAuthSlice\";\nexport const BASE_URL = \"https://norma.nomoreparties.space/api\";\nexport const ORDERS_ALL = \"wss://norma.nomoreparties.space/orders/all\";\nexport const ORDERS = \"wss://norma.nomoreparties.space/orders\";\nexport function checkResponse(res) {\n  return res.ok ? res.json() : res.json().then(err => Promise.reject(err));\n}\n\n//делаю обертку вокруг fetch чтобы в разных запросах можно было использовать, url базовый статичный, меняется только endpoint в этом api\nexport function request(endpoint, options) {\n  return fetch(`${BASE_URL}${endpoint}`, options).then(checkResponse);\n}\n\n// async нужен когда несколько await поэтому убрал от сюда + а далее передаю рес, но его убрал т.к в стрелочной функции рес передается один и тотже в функицию\nexport const getEngredients = () => request(`/ingredients`, {});\nexport const fetchOrder = createAsyncThunk('orders/fetchOrder', async orderNum => {\n  const response = await fetch(`${BASE_URL}/orders/${orderNum}`);\n  if (!response.ok) {\n    throw new Error('Ошибка получения заказа');\n  }\n  const data = await response.json();\n  return data;\n});\nexport const getOrder = number => request(`/orders/${number}`, {});\nexport const sendOrder = createAsyncThunk(\"details/post\", async dataId => {\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    authorization: localStorage.getItem(\"accessToken\") || \"\"\n  };\n  return request(`/orders`, {\n    method: \"POST\",\n    headers,\n    body: JSON.stringify({\n      ingredients: dataId\n    })\n  });\n});\n\n//запрос на регистрацию\nexport const registerUser = createAsyncThunk(\"user/register\", async (userData, _ref) => {\n  let {\n    dispatch\n  } = _ref;\n  return request(`/auth/register`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(userData)\n  }).then(res => {\n    if (res.success) {\n      localStorage.setItem(\"accessToken\", res.accessToken);\n      localStorage.setItem(\"refreshToken\", res.refreshToken);\n      return res;\n    } else {\n      return Promise.reject(\"Ошибка данных с сервера\");\n    }\n  }).finally(() => {\n    console.log(\"Ok\");\n  });\n});\n\n//запрос на авторизацию\nexport const loginUser = createAsyncThunk(\"user/login\", async (data, thunkApi) => {\n  return request(\"/auth/login\", {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email: data.email,\n      password: data.password\n    })\n  }).then(res => {\n    if (res.success) {\n      localStorage.setItem(\"accessToken\", res.accessToken);\n      localStorage.setItem(\"refreshToken\", res.refreshToken);\n      return res;\n    } else {\n      return Promise.reject(\"Ошибка данных с сервера\");\n    }\n  }).catch(err => {\n    console.log(err);\n  }).finally(() => {\n    console.log(\"Ok\");\n  });\n});\n\n// запрос на получение токенов через рефреш токен\nconst refreshToken = () => {\n  return request(`/auth/token`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      token: localStorage.getItem(\"refreshToken\")\n    })\n  });\n};\nconst fetchWithRefresh = async (url, options) => {\n  try {\n    const res = await fetch(url, options);\n    return await checkResponse(res);\n  } catch (err) {\n    console.log(err);\n    console.log(err instanceof Error);\n    if ((err instanceof Error ? err.message : \"unknown_error\") === \"jwt expired\") {\n      console.log(err);\n      const refreshData = await refreshToken();\n      console.log(refreshData);\n      if (!refreshData.success) {\n        return Promise.reject(refreshData);\n      }\n      localStorage.setItem(\"accessToken\", refreshData.accessToken);\n      localStorage.setItem(\"refreshToken\", refreshData.refreshToken);\n      options.headers.authorization = refreshData.accessToken;\n      const res = await fetch(url, options);\n      return await checkResponse(res);\n    } else {\n      return Promise.reject(err);\n    }\n  }\n};\nexport const getUser = () => {\n  return dispatch => {\n    return fetchWithRefresh(`${BASE_URL}/auth/user`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        authorization: localStorage.getItem(\"accessToken\")\n      }\n    }).then(res => {\n      console.log(res);\n      if (res.success) {\n        dispatch(setUser(res.user));\n      } else {\n        return Promise.reject(\"Ошибка данных с сервера\");\n      }\n    });\n  };\n};\nexport const checkUserAuth = createAsyncThunk(\"user/auth\", async (_, _ref2) => {\n  let {\n    dispatch\n  } = _ref2;\n  if (localStorage.getItem(\"accessToken\")) {\n    dispatch(getUser()).catch(error => {\n      localStorage.removeItem(\"accessToken\");\n      localStorage.removeItem(\"refreshToken\");\n      dispatch(setUser(null));\n    }).finally(() => dispatch(setAuthChecked(true)));\n  } else {\n    dispatch(setAuthChecked(true));\n    dispatch(setUser(null));\n  }\n});\nexport const forgotPassword = createAsyncThunk(\"user/forgot\", async (email, _) => {\n  return request(`/password-reset`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      email\n    })\n  });\n});\nexport const resetPassword = createAsyncThunk(\"user/reset\", async (data, _) => {\n  return request(`/password-reset/reset`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      data\n    })\n  });\n});\nexport const logoutUser = createAsyncThunk(\"user/logout\", async (_, _ref3) => {\n  let {\n    dispatch\n  } = _ref3;\n  return request(`/auth/logout`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      token: localStorage.getItem(\"refreshToken\")\n    })\n  }).then(() => {\n    localStorage.removeItem(\"accessToken\");\n    localStorage.removeItem(\"refreshToken\");\n  });\n});","map":{"version":3,"names":["createAsyncThunk","setAuthChecked","setUser","BASE_URL","ORDERS_ALL","ORDERS","checkResponse","res","ok","json","then","err","Promise","reject","request","endpoint","options","fetch","getEngredients","fetchOrder","orderNum","response","Error","data","getOrder","number","sendOrder","dataId","headers","authorization","localStorage","getItem","method","body","JSON","stringify","ingredients","registerUser","userData","_ref","dispatch","success","setItem","accessToken","refreshToken","finally","console","log","loginUser","thunkApi","Accept","email","password","catch","token","fetchWithRefresh","url","message","refreshData","getUser","user","checkUserAuth","_","_ref2","error","removeItem","forgotPassword","resetPassword","logoutUser","_ref3"],"sources":["C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/src/utils/api.tsx"],"sourcesContent":["import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { setAuthChecked, setUser } from \"../services/store/reducers/userAuthSlice\";\r\nimport { TForgotPassword, TLogin, TProfile, TResetPassword } from \"./types\";\r\n\r\nexport const BASE_URL = \"https://norma.nomoreparties.space/api\";\r\nexport const ORDERS_ALL = \"wss://norma.nomoreparties.space/orders/all\";\r\nexport const ORDERS = \"wss://norma.nomoreparties.space/orders\";\r\n\r\nexport function checkResponse(res: Response) {\r\n  return res.ok\r\n    ? res.json()\r\n    : res.json().then((err: Error) => Promise.reject(err));\r\n}\r\n\r\n//делаю обертку вокруг fetch чтобы в разных запросах можно было использовать, url базовый статичный, меняется только endpoint в этом api\r\nexport function request(endpoint: string, options: RequestInit | undefined) {\r\n  return fetch(`${BASE_URL}${endpoint}`, options).then(checkResponse);\r\n}\r\n\r\n// async нужен когда несколько await поэтому убрал от сюда + а далее передаю рес, но его убрал т.к в стрелочной функции рес передается один и тотже в функицию\r\nexport const getEngredients = () => request(`/ingredients`, {});\r\n\r\n\r\n  export const fetchOrder = createAsyncThunk(\r\n    'orders/fetchOrder', \r\n    async (orderNum: number | string | undefined) => {\r\n      const response = await fetch(`${BASE_URL}/orders/${orderNum}`);\r\n      if (!response.ok) {\r\n        throw new Error('Ошибка получения заказа');\r\n      }\r\n      const data = await response.json();\r\n      return data;\r\n    }\r\n  );\r\n\r\n\r\nexport const getOrder = (number: number) => request(`/orders/${number}`, {});\r\n\r\nexport const sendOrder = createAsyncThunk(\r\n  \"details/post\",\r\n  async (dataId: string[]) => {\r\n    const headers: HeadersInit = {\r\n      \"Content-Type\": \"application/json\",\r\n      authorization: localStorage.getItem(\"accessToken\") || \"\",\r\n    };\r\n\r\n    return request(`/orders`, {\r\n      method: \"POST\",\r\n      headers,\r\n      body: JSON.stringify({\r\n        ingredients: dataId,\r\n      }),\r\n    });\r\n  }\r\n);\r\n\r\n//запрос на регистрацию\r\nexport const registerUser = createAsyncThunk(\r\n  \"user/register\",\r\n  async (userData: TProfile, { dispatch }) => {\r\n    return request(`/auth/register`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(userData),\r\n    })\r\n      .then((res) => {\r\n        if (res.success) {\r\n          localStorage.setItem(\"accessToken\", res.accessToken);\r\n          localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n          return res;\r\n        } else {\r\n          return Promise.reject(\"Ошибка данных с сервера\");\r\n        }\r\n      })\r\n      .finally(() => {\r\n        console.log(\"Ok\");\r\n      });\r\n  }\r\n);\r\n\r\n//запрос на авторизацию\r\nexport const loginUser = createAsyncThunk(\r\n  \"user/login\",\r\n  async (data: TLogin, thunkApi) => {\r\n    return request(\"/auth/login\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        email: data.email,\r\n        password: data.password,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        if (res.success) {\r\n          localStorage.setItem(\"accessToken\", res.accessToken);\r\n          localStorage.setItem(\"refreshToken\", res.refreshToken);\r\n          return res;\r\n        } else {\r\n          return Promise.reject(\"Ошибка данных с сервера\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      })\r\n      .finally(() => {\r\n        console.log(\"Ok\");\r\n      });\r\n  }\r\n);\r\n\r\n// запрос на получение токенов через рефреш токен\r\nconst refreshToken = () => {\r\n  return request(`/auth/token`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      token: localStorage.getItem(\"refreshToken\"),\r\n    }),\r\n  });\r\n};\r\n\r\nconst fetchWithRefresh = async (url: string, options: any) => {\r\n  try {\r\n    const res = await fetch(url, options);\r\n    return await checkResponse(res);\r\n  } catch (err) {\r\n    console.log(err);\r\n    console.log(err instanceof Error);\r\n    if (\r\n      (err instanceof Error ? err.message : \"unknown_error\") === \"jwt expired\"\r\n    ) {\r\n      console.log(err);\r\n      const refreshData = await refreshToken();\r\n      console.log(refreshData);\r\n      if (!refreshData.success) {\r\n        return Promise.reject(refreshData);\r\n      }\r\n      localStorage.setItem(\"accessToken\", refreshData.accessToken);\r\n      localStorage.setItem(\"refreshToken\", refreshData.refreshToken);\r\n      options.headers.authorization = refreshData.accessToken;\r\n      const res = await fetch(url, options);\r\n      return await checkResponse(res);\r\n    } else {\r\n      return Promise.reject(err);\r\n    }\r\n  }\r\n};\r\n\r\nexport const getUser = () => {\r\n  return (dispatch: (arg0: { payload: any; type: \"user/setUser\" }) => void) => {\r\n    return fetchWithRefresh(`${BASE_URL}/auth/user`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        authorization: localStorage.getItem(\"accessToken\"),\r\n      },\r\n    }).then((res) => {\r\n      console.log(res);\r\n      if (res.success) {\r\n        dispatch(setUser(res.user));\r\n      } else {\r\n        return Promise.reject(\"Ошибка данных с сервера\");\r\n      }\r\n    });\r\n  };\r\n};\r\n\r\nexport const checkUserAuth = createAsyncThunk(\r\n  \"user/auth\",\r\n  async (_, { dispatch }) => {\r\n    if (localStorage.getItem(\"accessToken\")) {\r\n      dispatch(getUser())\r\n        .catch((error) => {\r\n          localStorage.removeItem(\"accessToken\");\r\n          localStorage.removeItem(\"refreshToken\");\r\n          dispatch(setUser(null));\r\n        })\r\n        .finally(() => dispatch(setAuthChecked(true)));\r\n    } else {\r\n      dispatch(setAuthChecked(true));\r\n      dispatch(setUser(null));\r\n    }\r\n  }\r\n);\r\n\r\nexport const forgotPassword = createAsyncThunk(\r\n  \"user/forgot\",\r\n  async (email: TForgotPassword, _) => {\r\n    return request(`/password-reset`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email }),\r\n    });\r\n  }\r\n);\r\n\r\nexport const resetPassword = createAsyncThunk(\r\n  \"user/reset\",\r\n  async (data: TResetPassword, _) => {\r\n    return request(`/password-reset/reset`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ data }),\r\n    });\r\n  }\r\n);\r\n\r\nexport const logoutUser = createAsyncThunk(\r\n  \"user/logout\",\r\n  async (_, { dispatch }) => {\r\n    return request(`/auth/logout`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ token: localStorage.getItem(\"refreshToken\") }),\r\n    }).then(() => {\r\n      localStorage.removeItem(\"accessToken\");\r\n      localStorage.removeItem(\"refreshToken\");\r\n    });\r\n  }\r\n);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}