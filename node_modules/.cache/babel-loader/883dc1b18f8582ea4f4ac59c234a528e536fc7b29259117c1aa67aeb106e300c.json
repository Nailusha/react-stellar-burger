{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nailusha\\\\Desktop\\\\yandex-dev\\\\react-stellar-burger\\\\src\\\\pages\\\\feed\\\\feed.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { OrderStats } from \"../../components/order-stats/order-stats\";\nimport { OrderCard } from \"../../components/order-card/order-card\";\nimport styles from \"./feed.module.css\";\nimport { ORDERS_ALL } from \"../../utils/api\";\nimport { useAppDispatch, useAppSelector } from \"../../services/hooks/hooks\";\nimport { connect, wsClose } from \"../../services/store/reducers/socket/actions\";\nimport { allOrdersInf } from \"../../services/store/selectors/wsSelectors/allOrders\";\nimport { ingredientSelector } from \"../../services/store/selectors/ingredientSelector\";\nimport { useLocation } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Feed() {\n  _s();\n  const dispatch = useAppDispatch();\n  const ordersInf = useAppSelector(allOrdersInf);\n  const ordersData = ordersInf && ordersInf.orders;\n  const ingredientsData = useAppSelector(ingredientSelector);\n  const location = useLocation();\n  function price(item) {\n    let totalPrice = 0;\n    if (item) {\n      item.ingredients.forEach(ingrAll => {\n        ingredientsData.forEach(itemData => {\n          if (itemData._id === ingrAll) {\n            totalPrice += itemData.type === \"bun\" ? itemData.price * 2 : itemData.price;\n          }\n        });\n      });\n    }\n    return totalPrice;\n  }\n\n  /*\r\n  console.log(ordersData);\r\n  const newData = [];\r\n  if (ordersData) {\r\n    ordersData.forEach((itemAll) => {\r\n      itemAll.ingredients.forEach((ingrAll) => {\r\n        ingredientsData.forEach((itemData) => {\r\n          if (itemData._id === ingrAll) {\r\n            const p = itemData.price;\r\n            const newItemAll = {\r\n              ...itemAll,\r\n              price: p + itemData.price\r\n            };\r\n            newData.push(newItemAll);\r\n          }\r\n        });\r\n      })\r\n    });\r\n  }\r\n  */\n  /*\r\n    const newData = [];\r\n  ordersData&&ordersData.forEach((itemAll) => ingredients.forEach((ingr) => {\r\n    if (itemAll._id === ingr._id) {\r\n      itemAll.price = ingr.price;\r\n      newData.push(itemAll);\r\n    }\r\n  }));\r\n  console.log(newData)\r\n  */\n\n  useEffect(() => {\n    dispatch(connect(ORDERS_ALL));\n    return () => {\n      wsClose();\n    };\n  }, []);\n  return ordersData && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.main,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: `text text_type_main-large mb-5 mt-10  ${styles.title}`,\n      children: \"\\u041B\\u0435\\u043D\\u0442\\u0430 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: `${styles.orders} custom-scroll pr-2`,\n      children: ordersData.map(item => {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          className: styles.link,\n          to: `${item.number}`,\n          state: {\n            background: location\n          },\n          children: /*#__PURE__*/_jsxDEV(OrderCard, {\n            ordersData: item,\n            price: price(item)\n          }, item._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this)\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.stats,\n      children: /*#__PURE__*/_jsxDEV(OrderStats, {\n        ordersInf: ordersInf,\n        number: \"\",\n        _id: \"\",\n        status: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 7\n  }, this);\n}\n_s(Feed, \"svDn/k3CZAJoe7oOsPr6tLxhpd4=\", false, function () {\n  return [useAppDispatch, useAppSelector, useAppSelector, useLocation];\n});\n_c = Feed;\nvar _c;\n$RefreshReg$(_c, \"Feed\");","map":{"version":3,"names":["useEffect","OrderStats","OrderCard","styles","ORDERS_ALL","useAppDispatch","useAppSelector","connect","wsClose","allOrdersInf","ingredientSelector","useLocation","Link","jsxDEV","_jsxDEV","Feed","_s","dispatch","ordersInf","ordersData","orders","ingredientsData","location","price","item","totalPrice","ingredients","forEach","ingrAll","itemData","_id","type","className","main","children","title","fileName","_jsxFileName","lineNumber","columnNumber","map","link","to","number","state","background","stats","status","_c","$RefreshReg$"],"sources":["C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/src/pages/feed/feed.tsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { OrderStats } from \"../../components/order-stats/order-stats\";\r\nimport { OrderCard } from \"../../components/order-card/order-card\";\r\nimport { OrderList } from \"../../components/order-icon/\";\r\nimport styles from \"./feed.module.css\";\r\nimport { ORDERS_ALL } from \"../../utils/api\";\r\nimport { useAppDispatch, useAppSelector } from \"../../services/hooks/hooks\";\r\nimport {\r\n  connect,\r\n  wsClose,\r\n  wsConnecting,\r\n  wsMessage,\r\n} from \"../../services/store/reducers/socket/actions\";\r\nimport { allOrdersInf } from \"../../services/store/selectors/wsSelectors/allOrders\";\r\nimport { ingredientSelector } from \"../../services/store/selectors/ingredientSelector\";\r\nimport { FormattedDate } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { TingredintsConstructor, Torder } from \"../../utils/types\";\r\nimport { TFeedOrder } from \"../../utils/live-table\";\r\n\r\nexport default function Feed() {\r\n  const dispatch = useAppDispatch();\r\n  const ordersInf = useAppSelector(allOrdersInf);\r\n  const ordersData = ordersInf && ordersInf.orders;\r\n  const ingredientsData = useAppSelector(ingredientSelector);\r\n  const location = useLocation();\r\n\r\n  function price(item:TFeedOrder) {\r\n    let totalPrice = 0;\r\n    if (item) {\r\n      item.ingredients.forEach((ingrAll) => {\r\n        ingredientsData.forEach(\r\n          (itemData: { _id: string; type: string; price: number }) => {\r\n            if (itemData._id === ingrAll) {\r\n              totalPrice +=\r\n                itemData.type === \"bun\" ? itemData.price * 2 : itemData.price;\r\n            }\r\n          }\r\n        );\r\n      });\r\n    }\r\n    return totalPrice;\r\n  }\r\n\r\n  /*\r\n  console.log(ordersData);\r\n  const newData = [];\r\n  if (ordersData) {\r\n    ordersData.forEach((itemAll) => {\r\n      itemAll.ingredients.forEach((ingrAll) => {\r\n        ingredientsData.forEach((itemData) => {\r\n          if (itemData._id === ingrAll) {\r\n            const p = itemData.price;\r\n            const newItemAll = {\r\n              ...itemAll,\r\n              price: p + itemData.price\r\n            };\r\n            newData.push(newItemAll);\r\n          }\r\n        });\r\n      })\r\n    });\r\n  }\r\n  */\r\n  /*\r\n    const newData = [];\r\n  ordersData&&ordersData.forEach((itemAll) => ingredients.forEach((ingr) => {\r\n    if (itemAll._id === ingr._id) {\r\n      itemAll.price = ingr.price;\r\n      newData.push(itemAll);\r\n    }\r\n  }));\r\n  console.log(newData)\r\n  */\r\n\r\n  useEffect(() => {\r\n    dispatch(connect(ORDERS_ALL));\r\n\r\n    return () => {\r\n      wsClose();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    ordersData && (\r\n      <div className={styles.main}>\r\n        <h1 className={`text text_type_main-large mb-5 mt-10  ${styles.title}`}>\r\n          Лента заказов\r\n        </h1>\r\n        <section className={`${styles.orders} custom-scroll pr-2`}>\r\n          {ordersData.map((item) => {\r\n            return (\r\n              <Link\r\n                className={styles.link}\r\n                key={item._id}\r\n                to={`${item.number}`}\r\n                state={{ background: location }}\r\n              >\r\n                <OrderCard\r\n                  key={item._id}\r\n                  ordersData={item}\r\n                  price={price(item)}\r\n                />\r\n              </Link>\r\n            );\r\n          })}\r\n        </section>\r\n        <div className={styles.stats}>\r\n          <OrderStats ordersInf={ordersInf} number={\"\"} _id={\"\"} status={\"\"} />\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}