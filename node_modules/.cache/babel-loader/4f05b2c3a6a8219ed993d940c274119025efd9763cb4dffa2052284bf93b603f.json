{"ast":null,"code":"import _slicedToArray from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ConstructorElement,DragIcon}from\"@ya.praktikum/react-developer-burger-ui-components\";import React,{memo}from\"react\";import{useDrag,useDrop}from\"react-dnd\";import styles from\"./burger-constructor-card.module.css\";import{moveIngredients}from\"../../../../services/store/reducers/burgerConstructorSlice\";import{useAppDispatch,useAppSelector}from\"../../../../services/hooks/hooks\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BurgerConstructorCard=/*#__PURE__*/memo(function BurgerConstructorCard(_ref){var data=_ref.data,handleDeliteElement=_ref.handleDeliteElement,index=_ref.index;var name=data.name,price=data.price,image_mobile=data.image_mobile,_id=data._id,_uuid=data._uuid;var _useAppSelector=useAppSelector(function(state){return state.constIngredient;}),draggedBun=_useAppSelector.draggedBun,draggedIngredients=_useAppSelector.draggedIngredients;var dispatch=useAppDispatch();var findIndex=function findIndex(item){return draggedIngredients.indexOf(item);};// часть с ингредиентами в конструкторе\nvar _useDrag=useDrag({type:\"card\",item:{ingredient:data},collect:function collect(monitor){return{isDragging:monitor.isDragging()};}}),_useDrag2=_slicedToArray(_useDrag,2),isDragging=_useDrag2[0].isDragging,refDrag=_useDrag2[1];var _useDrop=useDrop({accept:\"card\",hover:function hover(_ref2){var ingredient=_ref2.ingredient;if(ingredient!==undefined){if(ingredient._uuid===data._uuid)return;dispatch(moveIngredients({indexFrom:findIndex(ingredient),indexTo:index,ingredient:ingredient}));}}}),_useDrop2=_slicedToArray(_useDrop,2),dropRef=_useDrop2[1];var opacity=isDragging?0:1;return/*#__PURE__*/_jsxs(\"div\",{ref:function ref(node){return dropRef(refDrag(node));},style:{opacity:opacity},className:styles.card,children:[/*#__PURE__*/_jsx(DragIcon,{type:\"error\"}),/*#__PURE__*/_jsx(ConstructorElement,{text:name,price:price,thumbnail:image_mobile,handleClose:function handleClose(){return handleDeliteElement(_uuid);}})]});});","map":{"version":3,"names":["ConstructorElement","DragIcon","React","memo","useDrag","useDrop","styles","moveIngredients","useAppDispatch","useAppSelector","jsx","_jsx","jsxs","_jsxs","BurgerConstructorCard","_ref","data","handleDeliteElement","index","name","price","image_mobile","_id","_uuid","_useAppSelector","state","constIngredient","draggedBun","draggedIngredients","dispatch","findIndex","item","indexOf","_useDrag","type","ingredient","collect","monitor","isDragging","_useDrag2","_slicedToArray","refDrag","_useDrop","accept","hover","_ref2","undefined","indexFrom","indexTo","_useDrop2","dropRef","opacity","ref","node","style","className","card","children","text","thumbnail","handleClose"],"sources":["C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/src/components/main/BurgerConstructor/burger-constructor-card/burger-constructor-card.tsx"],"sourcesContent":["import {ConstructorElement,DragIcon,} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport React, { memo } from \"react\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport styles from \"./burger-constructor-card.module.css\";\r\n\r\nimport { moveIngredients } from \"../../../../services/store/reducers/burgerConstructorSlice\";\r\nimport { TConstructorCard, TDragItem, TIsDragging, TWithChildren, TingredintsConstructor } from \"../../../../utils/types\";\r\nimport { useAppDispatch, useAppSelector } from \"../../../../services/hooks/hooks\";\r\n\r\nexport const BurgerConstructorCard = memo(function BurgerConstructorCard({\r\n  data,\r\n  handleDeliteElement,\r\n  index,\r\n}: TWithChildren<TConstructorCard>) {\r\n  const { name, price, image_mobile, _id, _uuid } = data;\r\n  const { draggedBun, draggedIngredients } = useAppSelector(\r\n    (state) => state.constIngredient\r\n  );\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const findIndex = (item: TingredintsConstructor) => {\r\n    return draggedIngredients.indexOf(item);\r\n  };\r\n\r\n\r\n\r\n  // часть с ингредиентами в конструкторе\r\n  const [{ isDragging }, refDrag] = useDrag<TDragItem, unknown, TIsDragging>({\r\n    type: \"card\",\r\n    item: { ingredient: data },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const [, dropRef] = useDrop<TDragItem, unknown, unknown>({\r\n    accept: \"card\",\r\n    hover({ ingredient }) {\r\n      if (ingredient !== undefined) {\r\n        if (ingredient._uuid === data._uuid) return;\r\n\r\n        dispatch(\r\n          moveIngredients({\r\n            indexFrom: findIndex(ingredient),\r\n            indexTo: index,\r\n            ingredient: ingredient,\r\n          })\r\n        );\r\n      }\r\n    },\r\n  });\r\n\r\n  const opacity = isDragging ? 0 : 1;\r\n\r\n  return (\r\n    <div\r\n      ref={(node) => dropRef(refDrag(node))}\r\n      style={{ opacity }}\r\n      className={styles.card}\r\n    >\r\n      <DragIcon type={\"error\"} />\r\n      <ConstructorElement\r\n        text={name}\r\n        price={price}\r\n        thumbnail={image_mobile}\r\n        handleClose={() => handleDeliteElement(_uuid)}\r\n      />\r\n    </div>\r\n  );\r\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}