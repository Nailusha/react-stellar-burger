{"ast":null,"code":"import _slicedToArray from\"C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{Route,Routes,useLocation}from\"react-router-dom\";import ResetPassword from\"../../pages/reset-password/reset-password\";import Profile from\"../../pages/profile/profile\";import Layout from\"../../pages/layout/layout\";import OrdersPage from\"../../pages/orders/orders\";import IngredientDetails from\"../../pages/ingredients-details/ingredients-details\";import NotFound from\"../../pages/not-found/not-found\";import ForgotPassword from\"../../pages/forgot-password/forgot-password\";import AppMain from\"../main/app-main/app-main\";import Feed from\"../../pages/feed/feed\";import Modal from\"../modal/modal\";import OrderDetails from\"../modal/order-details/order-details\";import Preloader from\"../preloder/preloder\";import{fetchIngredients}from\"../../services/store/reducers/ingredientQuery\";import{ingredientSelector}from\"../../services/store/selector/ingredientSelector\";import{OnlyAuth,OnlyUnAuth}from\"../protected-route/protected-route\";import{checkUserAuth,getUser}from\"../../utils/api\";import{useAppDispatch,useAppSelector}from\"../../services/hooks/hooks\";import{Login}from\"../../pages/login/login\";import{Register}from\"../../pages/register/register\";import{UserForm}from\"../../pages/user-form/user-form\";import{OrderInformation}from\"../../pages/order-information/order-information\";import{clickOpen}from\"../../services/store/reducers/modalOverlaySlice\";import{clickDetails}from\"../../services/store/reducers/orderDetailsSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isloding=_useState2[0],setIsLoding=_useState2[1];var ingredients=useAppSelector(ingredientSelector);var isAuthChecked=useAppSelector(function(store){return store.userStatus.isAuthChecked;});var isClickStutusDetails=useAppSelector(function(state){return state.orderDetails.clickStutus;});var location=useLocation();var background=location.state&&location.state.background;var dispatch=useAppDispatch();var childForModal=function childForModal(){return/*#__PURE__*/_jsx(Modal,{isLink:false,children:isClickStutusDetails&&/*#__PURE__*/_jsx(OrderDetails,{})});};var closeModal=function closeModal(){dispatch(clickOpen(false));dispatch(clickDetails(false));};useEffect(function(){dispatch(fetchIngredients());dispatch(checkUserAuth());isAuthChecked&&dispatch(getUser());},[dispatch]);if(ingredients.length<1)return null;if(isloding){return/*#__PURE__*/_jsx(Preloader,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Routes,{location:background||location,children:/*#__PURE__*/_jsxs(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Layout,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(AppMain,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(OnlyUnAuth,{component:/*#__PURE__*/_jsx(Login,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/feed\",element:/*#__PURE__*/_jsx(Feed,{})}),/*#__PURE__*/_jsx(Route,{path:\"/feed/:id\",element:/*#__PURE__*/_jsx(OrderInformation,{modal:false})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(OnlyUnAuth,{component:/*#__PURE__*/_jsx(Register,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(OnlyUnAuth,{component:/*#__PURE__*/_jsx(ForgotPassword,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password\",element:/*#__PURE__*/_jsx(OnlyUnAuth,{component:/*#__PURE__*/_jsx(ResetPassword,{})})}),/*#__PURE__*/_jsxs(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(OnlyAuth,{component:/*#__PURE__*/_jsx(Profile,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(UserForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile/orders\",element:/*#__PURE__*/_jsx(OrdersPage,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"/profile/orders/:id\",element:/*#__PURE__*/_jsx(OrderInformation,{modal:false})}),/*#__PURE__*/_jsx(Route,{path:\"/ingredients/:id\",element:/*#__PURE__*/_jsx(IngredientDetails,{isSinglePage:true})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]})}),background&&/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/ingredients/:id\",element:/*#__PURE__*/_jsxs(Modal,{isLink:true,children:[\" \",/*#__PURE__*/_jsx(IngredientDetails,{isSinglePage:false})]})}),/*#__PURE__*/_jsx(Route,{path:\"/feed/:id\",element:/*#__PURE__*/_jsxs(Modal,{isLink:true,children:[\" \",/*#__PURE__*/_jsx(OrderInformation,{modal:true})]})}),/*#__PURE__*/_jsx(Route,{path:\"/profile/orders/:id\",element:/*#__PURE__*/_jsxs(Modal,{isLink:true,children:[\" \",/*#__PURE__*/_jsx(OrderInformation,{modal:true})]})})]}),isClickStutusDetails&&childForModal()]});};export default App;","map":{"version":3,"names":["useState","useEffect","Route","Routes","useLocation","ResetPassword","Profile","Layout","OrdersPage","IngredientDetails","NotFound","ForgotPassword","AppMain","Feed","Modal","OrderDetails","Preloader","fetchIngredients","ingredientSelector","OnlyAuth","OnlyUnAuth","checkUserAuth","getUser","useAppDispatch","useAppSelector","Login","Register","UserForm","OrderInformation","clickOpen","clickDetails","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_useState","_useState2","_slicedToArray","isloding","setIsLoding","ingredients","isAuthChecked","store","userStatus","isClickStutusDetails","state","orderDetails","clickStutus","location","background","dispatch","childForModal","isLink","children","closeModal","length","path","element","component","modal","index","isSinglePage"],"sources":["C:/Users/Nailusha/Desktop/yandex-dev/react-stellar-burger/src/components/app/app.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Route, Routes, useLocation } from \"react-router-dom\";\r\n\r\n\r\nimport ResetPassword from \"../../pages/reset-password/reset-password\";\r\nimport Profile from \"../../pages/profile/profile\";\r\nimport Layout from \"../../pages/layout/layout\";\r\nimport OrdersPage from \"../../pages/orders/orders\";\r\nimport IngredientDetails from \"../../pages/ingredients-details/ingredients-details\";\r\nimport NotFound from \"../../pages/not-found/not-found\";\r\nimport ForgotPassword from \"../../pages/forgot-password/forgot-password\";\r\nimport AppMain from \"../main/app-main/app-main\";\r\nimport Feed from \"../../pages/feed/feed\";\r\nimport Modal from \"../modal/modal\";\r\nimport OrderDetails from \"../modal/order-details/order-details\";\r\nimport Preloader from \"../preloder/preloder\";\r\nimport { fetchIngredients } from \"../../services/store/reducers/ingredientQuery\";\r\nimport { ingredientSelector } from \"../../services/store/selector/ingredientSelector\";\r\nimport { OnlyAuth, OnlyUnAuth } from \"../protected-route/protected-route\";\r\nimport { checkUserAuth, fetchOrder, getOrder, getUser } from \"../../utils/api\";\r\nimport { useAppDispatch, useAppSelector } from \"../../services/hooks/hooks\";\r\nimport { Login } from \"../../pages/login/login\";\r\nimport { Register } from \"../../pages/register/register\";\r\nimport { UserForm } from \"../../pages/user-form/user-form\";\r\nimport { OrderList } from \"../order-icon/order-icon\";\r\nimport { OrderCard } from \"../order-card/order-card\";\r\nimport { OrderInformation } from \"../../pages/order-information/order-information\";\r\nimport { clickOpen } from \"../../services/store/reducers/modalOverlaySlice\";\r\nimport { clickDetails } from \"../../services/store/reducers/orderDetailsSlice\";\r\nimport { detailsSelector } from \"../../services/store/selector/detailsSelector\";\r\n\r\nconst App = () => {\r\n  const [isloding, setIsLoding] = useState(false);\r\n  const ingredients = useAppSelector(ingredientSelector);\r\n  const isAuthChecked = useAppSelector((store) => store.userStatus.isAuthChecked);\r\n\r\n  const isClickStutusDetails = useAppSelector(\r\n    (state) => state.orderDetails.clickStutus\r\n  ) as boolean;\r\n\r\n  const location = useLocation();\r\n  const background = location.state && location.state.background;\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const childForModal = () => {\r\n    return (\r\n      <Modal isLink={false}>{isClickStutusDetails && <OrderDetails />}</Modal>\r\n    );\r\n  };\r\n\r\n\r\n  const closeModal = () => {\r\n    dispatch(clickOpen(false));\r\n    dispatch(clickDetails(false));\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchIngredients());\r\n    dispatch(checkUserAuth());\r\n    isAuthChecked&&\r\n    dispatch(getUser());\r\n  }, [dispatch]);\r\n\r\n  if (ingredients.length < 1) return null;\r\n\r\n  if (isloding) {\r\n    return <Preloader />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Routes location={background || location}>\r\n        <Route path=\"/\" element={<Layout />}>\r\n          <Route path=\"/\" element={<AppMain />} />\r\n          <Route path=\"/login\" element={<OnlyUnAuth component={<Login />} />} />\r\n          <Route path=\"/feed\" element={<Feed />} />\r\n          <Route\r\n            path=\"/feed/:id\"\r\n            element={<OrderInformation modal={false} />}\r\n          />\r\n\r\n          <Route\r\n            path=\"/register\"\r\n            element={<OnlyUnAuth component={<Register />} />}\r\n          />\r\n          <Route\r\n            path=\"/forgot-password\"\r\n            element={<OnlyUnAuth component={<ForgotPassword />} />}\r\n          />\r\n          <Route\r\n            path=\"/reset-password\"\r\n            element={<OnlyUnAuth component={<ResetPassword />} />}\r\n          />\r\n          <Route path=\"/profile\" element={<OnlyAuth component={<Profile />} />}>\r\n            <Route index element={<UserForm />} />\r\n            <Route path={\"/profile/orders\"} element={<OrdersPage />} />\r\n          </Route>\r\n          <Route\r\n            path=\"/profile/orders/:id\"\r\n            element={<OrderInformation modal={false} />}\r\n          />\r\n          <Route\r\n            path=\"/ingredients/:id\"\r\n            element={<IngredientDetails isSinglePage/>}\r\n          />\r\n          <Route path=\"*\" element={<NotFound />} />\r\n        </Route>\r\n      </Routes>\r\n      {background && (\r\n        <Routes>\r\n          <Route\r\n            path=\"/ingredients/:id\"\r\n            element={\r\n              <Modal isLink>\r\n                {\" \"}\r\n                <IngredientDetails isSinglePage={false} />\r\n              </Modal>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/feed/:id\"\r\n            element={\r\n              <Modal isLink>\r\n                {\" \"}\r\n                <OrderInformation modal={true} />\r\n              </Modal>\r\n            }\r\n          />\r\n          <Route\r\n            path=\"/profile/orders/:id\"\r\n            element={\r\n              <Modal isLink>\r\n                {\" \"}\r\n                <OrderInformation modal={true} />\r\n              </Modal>\r\n            }\r\n          />\r\n        </Routes>\r\n      )}\r\n      {isClickStutusDetails && childForModal()}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}